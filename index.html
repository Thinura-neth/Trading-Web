<!doctype html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Stock Trade Calculator</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#06b6d4; --muted:#9aa4b2;
      --green:#16a34a; --red:#dc2626; --glass: rgba(255,255,255,0.03);
      --card-pad:18px; --radius:12px; --mono: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }
    *{box-sizing:border-box}
    body{font-family:var(--mono);background:linear-gradient(180deg,#071229 0%, #081226 100%);color:#e6eef6;margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:920px}

    .header{background:linear-gradient(90deg, rgba(6,182,212,0.06), rgba(16,185,129,0.03));border-radius:14px;padding:18px;margin-bottom:18px;display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#10b981);display:flex;align-items:center;justify-content:center;font-weight:700;color:#021018}
    .title h1{margin:0;font-size:20px} .title p{margin:2px 0 0;font-size:13px;color:var(--muted)}

    .navbtn{margin-left:auto;background:var(--accent);padding:10px 14px;border-radius:10px;color:#021018;font-weight:600;text-decoration:none}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .card{background:var(--card);border-radius:var(--radius);padding:var(--card-pad);box-shadow:0 6px 20px rgba(2,6,23,0.6);}

    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type="number"]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:var(--glass);color:inherit;font-size:14px}
    .muted{font-size:12px;color:var(--muted)}

    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--accent);color:#021018;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

    .summary{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:10px}
    .row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,0.02)}
    .row:last-child{border-bottom:0}
    .value{font-weight:700}

    .final{font-size:18px;padding:14px;border-radius:10px;text-align:center}
    .profit{background:linear-gradient(90deg, rgba(16,185,129,0.12), rgba(16,185,129,0.04));color:var(--green)}
    .loss{background:linear-gradient(90deg, rgba(220,38,38,0.1), rgba(220,38,38,0.03));color:var(--red)}

    .progress-wrap{height:12px;background:rgba(255,255,255,0.03);border-radius:8px;overflow:hidden}
    .progress-bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#10b981);transition:width 350ms linear}

    .footer{margin-top:14px;color:var(--muted);font-size:13px;text-align:center}

    @media (max-width:820px){.grid{grid-template-columns:1fr}.logo{display:none}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="logo">SC</div>
      <div class="title">
        <h1>Stock Trade Calculator</h1>
        <p>Buy â†’ Sell â†’ Calculate profit instantly</p>
      </div>

      <!-- ðŸ”µ New Difference Page Link -->
      <a href="difference.html" class="navbtn">Difference</a>
    </div>

    <!-- BUY + SELL GRID -->
    <div class="grid">

      <!-- BUY SECTION -->
      <div class="card">
        <div class="box">
          <div class="box-title">BUY SECTION</div>
          <label>Buy Price (Rs.)</label>
          <input id="buyPrice" type="number" step="0.01">

          <label style="margin-top:10px">Buy Quantity</label>
          <input id="buyQty" type="number" min="1">

          <button id="buyBtn" class="btn" style="margin-top:12px">Calculate Buy</button>

          <div id="buyResult" class="summary" hidden style="margin-top:14px">
            <div class="row"><div>Buy Total</div><div id="buyTotalDisplay" class="value">Rs. 0.00</div></div>
            <div class="row"><div>Buy Fee (1.120%)</div><div id="buyFeeDisplay" class="value">Rs. 0.00</div></div>
            <div class="row"><div>Total</div><div id="combinedBuyDisplay" class="value">Rs. 0.00</div></div>
            <button id="toSell" class="btn" style="margin-top:10px" disabled>Continue â†’ Sell</button>
          </div>
        </div>
      </div>

      <!-- SELL SECTION -->
      <div class="card">
        <div class="box">
          <div class="box-title">SELL SECTION</div>
          <label>Sell Price (Rs.)</label>
          <input id="sellPrice" type="number" step="0.01" disabled>

          <label style="margin-top:10px">Sell Quantity</label>
          <input id="sellQty" type="number" disabled>

          <button id="calcSell" class="btn" style="margin-top:12px" disabled>
            Calculate Profit
          </button>

          <div id="sellResult" class="summary" hidden style="margin-top:14px">
            <div class="row"><div>Sell Total</div><div id="sellTotalDisplay" class="value"></div></div>
            <div class="row"><div>Sell Fee</div><div id="sellFeeDisplay" class="value"></div></div>
            <div class="row"><div>Total Fees</div><div id="feeTotalDisplay" class="value"></div></div>
            <div class="row"><div>Before Fees</div><div id="profitBeforeDisplay" class="value"></div></div>

            <div id="finalBox" class="final">
              Final Profit: <span id="finalProfitDisplay"></span>
            </div>
          </div>

          <div class="progress-wrap" id="progressWrap" hidden style="margin-top:14px">
            <div class="progress-bar" id="progressBar"></div>
          </div>

        </div>
      </div>

    </div>

    <div style="margin-top:20px" class="footer">
      Fill BUY â†’ Then SELL.  
    </div>
  </div>


<script>
(function(){

  const FEE = 1.120 / 100;

  // DOM Elements
  const buyPrice = buyPrice;
  const buyQty = buyQty;
  const buyBtn = buyBtn;
  const toSellBtn = toSell;
  const buyResult = buyResult;

  const sellPrice = sellPrice;
  const sellQty = sellQty;
  const calcSell = calcSell;
  const sellResult = sellResult;

  const buyTotalDisplay = buyTotalDisplay;
  const buyFeeDisplay = buyFeeDisplay;
  const combinedBuyDisplay = combinedBuyDisplay;

  const sellTotalDisplay = sellTotalDisplay;
  const sellFeeDisplay = sellFeeDisplay;
  const feeTotalDisplay = feeTotalDisplay;
  const profitBeforeDisplay = profitBeforeDisplay;
  const finalProfitDisplay = finalProfitDisplay;
  const finalBox = finalBox;

  const progressWrap = progressWrap;
  const progressBar = progressBar;

  function fmt(x){ return "Rs. " + Number(x).toFixed(2); }

  function animate(cb){
    progressWrap.hidden = false;
    progressBar.style.width = "0%";
    let x = 0;
    let id = setInterval(()=>{
      x += 20;
      if(x>=100){
        x=100; clearInterval(id);
        setTimeout(()=>{progressWrap.hidden = true; cb();},300);
      }
      progressBar.style.width = x+"%";
    },100);
  }

  buyBtn.onclick = ()=>{

    const p = parseFloat(buyPrice.value);
    const q = parseInt(buyQty.value);

    if(!p || !q){ alert("Enter valid BUY inputs"); return; }

    animate(()=>{
      let total = p*q;
      let fee = total * FEE;
      let combined = total + fee;

      buyTotalDisplay.textContent = fmt(total);
      buyFeeDisplay.textContent = fmt(fee);
      combinedBuyDisplay.textContent = fmt(combined);

      buyResult.hidden = false;

      toSellBtn.disabled = false;
    });
  };

  toSellBtn.onclick = ()=>{
    sellPrice.disabled = false;
    sellQty.disabled = false;
    calcSell.disabled = false;
    sellPrice.focus();
  };

  calcSell.onclick = ()=>{

    const bp = parseFloat(buyPrice.value);
    const bq = parseInt(buyQty.value);

    const sp = parseFloat(sellPrice.value);
    const sq = parseInt(sellQty.value);

    if(!sp || !sq) return alert("Enter valid SELL details");

    animate(()=>{

      const bt = bp*bq;
      const st = sp*sq;

      const buyFee = bt * FEE;
      const sellFee = st * FEE;

      const totalFees = buyFee + sellFee;
      const beforeFees = st - bt;

      const final = beforeFees - totalFees;

      sellTotalDisplay.textContent = fmt(st);
      sellFeeDisplay.textContent = fmt(sellFee);
      feeTotalDisplay.textContent = fmt(totalFees);
      profitBeforeDisplay.textContent = fmt(beforeFees);
      finalProfitDisplay.textContent = fmt(final);

      sellResult.hidden = false;

      finalBox.classList.remove("profit","loss");
      finalBox.classList.add(final>=0 ? "profit" : "loss");

    });

  };

})();
</script>

</body>
</html>
